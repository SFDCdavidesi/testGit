<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Prevent_Contract_Signed</fullName>
    <active>true</active>
    <description>US-0011088 - P1 - Users should NOT change FVF stage manually after sending</description>
    <errorConditionFormula>AND(
    NOT($Setup.byPass__c.ByPass_Validation__c),
    OR(
        RecordType.DeveloperName = &#39;FVF_Listing_Level&#39;, 
        RecordType.DeveloperName = &#39;FVF_Seller_Level&#39;
    ),
    $Profile.Name &lt;&gt; &#39;System Administrator&#39;,
    $Profile.Name &lt;&gt; &#39;Deal Acceptance Profile&#39;,
    ISCHANGED(Final_Value_Fee_Stage__c),
    OR(
        ISPICKVAL( Final_Value_Fee_Stage__c , &#39;Contract Signed&#39;), 
        ISPICKVAL( Final_Value_Fee_Stage__c , &#39;Running Contract&#39;),
        ISPICKVAL( Final_Value_Fee_Stage__c , &#39;Executed Contract&#39;)
    )
)</errorConditionFormula>
    <errorMessage>This stage cannot be changed manually.</errorMessage>
</ValidationRule>
