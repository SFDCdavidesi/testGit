<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>V1_Prevent_Update_Fields_After_Executed</fullName>
    <active>true</active>
    <description>US-0012195 - Deal Object field validation</description>
    <errorConditionFormula>AND(NOT($Setup.byPass__c.ByPass_Validation__c),
RecordType.DeveloperName = &#39;Deal_V1&#39;,
OR(
   ISCHANGED(EBH_Quantity__c),
   ISCHANGED(EBH_SellerPrice__c),
   ISCHANGED(EBH_DealPrice__c)
),
DATETIMEVALUE(Deal_End_Date_Time__c+&#39;:00&#39;) &lt; NOW(),
$Profile.Name &lt;&gt; &#39;System Administrator&#39;,
$Profile.Name &lt;&gt; &#39;System Administrator - Limited Privileges&#39;,
$Profile.Name &lt;&gt; &#39;Business Admin&#39;
)</errorConditionFormula>
    <errorMessage>These fields are not editable after the Deal is executed. Any such updates require approval from controlling.</errorMessage>
</ValidationRule>
