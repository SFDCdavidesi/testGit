<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Pricing_Version_Different_Pricing_RT</fullName>
    <active>true</active>
    <description>US-0009604 - [Contracts] Validation to restrict users upating the Pricing Version for Listing Agreement post Pricing record creation</description>
    <errorConditionFormula>AND( NOT($Setup.byPass__c.ByPass_Validation__c),
    RecordType.DeveloperName = &#39;EBH_ListingAgreement&#39;,
    OR( ISPICKVAL(Status, &#39;Draft&#39; ),
        ISPICKVAL( Status, &#39;In Negotiation&#39; ),
        ISPICKVAL( Status, &#39;Sent for Finance Pre-check&#39; )
    ),
    OR( 
        AND( ISCHANGED(PricingVersion__c),
            ISPICKVAL(PricingVersion__c, &#39;P1.0&#39; ),
            Number_of_Pricing_P2_records__c &gt; 0
        ),
        AND( ISCHANGED(PricingVersion__c),
            ISPICKVAL(PricingVersion__c, &#39;P2.0&#39;),
            Number_of_Pricing_P1_records__c &gt; 0
        )
    )
)</errorConditionFormula>
    <errorMessage>Please delete/remove the Pricing records created before changing the Pricing version.</errorMessage>
</ValidationRule>
