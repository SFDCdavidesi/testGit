<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Refurb_Preventing_manual_status_changes</fullName>
    <active>true</active>
    <description>US-0010124 - [Refurb] Skip Existing Pre check and Post Check Approval process for Refurb Contracts</description>
    <errorConditionFormula>AND(
    ISCHANGED( Status ) ,
    RecordType.DeveloperName = &#39;Refurbished&#39;,
    or(
        and(
            text(PRIORVALUE(Status)) &lt;&gt; &#39;Draft&#39;,
            text(PRIORVALUE(Status)) &lt;&gt; &#39;In Negotiation&#39;,
            text(Status) = &#39;In Negotiation&#39;,
            not(text( List_Control_Values__c )=&#39;1&#39; ),
            value(text(PRIORVALUE(List_Control_Values__c)))&lt;1
        )
        ,and(
            text(Status)=&#39;Pending Approval&#39;,
            not(text( List_Control_Values__c )=&#39;2&#39; ),
            value(text(PRIORVALUE(List_Control_Values__c)))&lt;2
        )
        ,and(
            text(Status)=&#39;Approved&#39;,
            not(text( List_Control_Values__c )=&#39;3&#39; ),
            value(text(PRIORVALUE(List_Control_Values__c)))&lt;3
        )
    )
) &amp;&amp; NOT( $Setup.ActiveValidationRules__c.All_Validation_Rules_Deactivated__c )</errorConditionFormula>
    <errorMessage>You cannot manually change the value of the Status of the Contract</errorMessage>
</ValidationRule>
